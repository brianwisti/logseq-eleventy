<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/style/main.css">
    <title></title>
  </head>
  <body>
    <header>
      <h1><a href="/">Random Geekery</a></h1>
      <nav>
        <a href="/page/">All Pages</a>
        <a href="/post/">Posts</a>
        <a href="/now/">Now</a>
      </nav>
      <main>
        <h1></h1>
        
  <article class="page">
    

    
  <section>
    <header>
      <h2>
      
        post/2017/Logging Money In Org Mode
      
      </h2>
      
  
  
    <table>
      
        
          <tr>
            <th>summary</th>
            <td><ul>
<li></li>
</ul>
</td>
          </tr>
        
      
        
          <tr>
            <th>date</th>
            <td><p>2017-07-31</p>
</td>
          </tr>
        
      
        
          <tr>
            <th>tags</th>
            <td><ul>
<li></li>
</ul>
</td>
          </tr>
        
      
        
          <tr>
            <th>posse</th>
            <td><ul>
<li></li>
</ul>
</td>
          </tr>
        
      
        
      
        
          <tr>
            <th>banner</th>
            <td><p>…/assets/cover-2017-07-31_1721608908549_0.png</p>
</td>
          </tr>
        
      
    </table>
  

    </header>

    
  
    <section class="block">
      

      
  
    
      
        
  
    <section class="block">
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I am setting up Emacs <em class="link-missing">Org</em> to track how I use my money. This is a healthy habit, which I applied in the past with a little paper notebook. This needs to be as easy as that little notebook, or I will never use it.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <aside class="note"><header>note</header><p><em class="link-missing">2020-03-01</em>: It wasn’t. I didn’t. But I’ve come back to it for other ideas over time.</p>
</aside>
        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I only want to see how I use my money. This can eventually become part of a budget, but all I want today is the ability to make quick money notes.</p>

        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>My friend paid me back some money they borrowed</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>One of the housemates chipped in for groceries</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I treated myself to coffee.</p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>Stuff like that. Let’s see what I come up with.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>What about my phone?</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I know there are budgeting phone apps. Those apps just haven’t served my needs. I spend more time in front of a computer than using my phone. I type at a keyboard quicker than on a phone.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>The setup</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I already use <a href="http://www.howardism.org/Technical/Emacs/journaling-org.html">journaling features</a> of Emacs org mode to record tasks that I accomplish through the day. That journal could also record income and expenses. I need a new org <a href="http://orgmode.org/manual/Capture-templates.html#Capture-templates">capture template</a> and menu item for money, though.</p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Adding a menu entry and template</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p><code>org-capture-templates</code> holds templates for creating new org entries. I manually edit mine, although the recommended approach to managing those is through the Emacs Customize interface. Old habits die hard.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <pre><code class="language-lisp">;; Probably easier for most folks to manage this with Customize (C-c c C),
;; but setting this stuff directly helps me understand the structure better.

(setq org-capture-templates
      (quote
       ((&quot;p&quot; &quot;Personal&quot;)
        ; ... other entries removed for clarity
        (&quot;pm&quot; &quot;Money entry&quot; entry
         (file+datetree &quot;~/Sync/org/agendas/journal.org&quot;)
         &quot;** %U - %^{Amount} %^{Summary} :money:%^g&quot;))))
</code></pre>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I start with fields needed for the template selection menu in <code>org-capture</code>. I also tell org mode to save money entries will in the <code>journal.org</code> file under a <em>date tree</em>, which presents a year / month / date hierarchy for entries. Finally, I describe the capture template.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>A capture template can be a string or file containing text and template directives. A short string describes money entries. The table below explains the <a href="http://orgmode.org/manual/Template-expansion.html#Template-expansion">template expansion</a> rules I used.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <table>
<thead>
<tr>
<th>Code</th>
<th>What it does</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%U</code></td>
<td>Creates an <em>inactive</em> timestamp, which will not appear in my regular agenda</td>
</tr>
<tr>
<td><code>%^{Amount}</code></td>
<td>Prompts me for the dollar amount of this transaction</td>
</tr>
<tr>
<td><code>%^{Summary}</code></td>
<td>Prompts me for a summary of this transaction</td>
</tr>
<tr>
<td><code>%^g</code></td>
<td>Prompts me for additional tags for this transaction</td>
</tr>
</tbody>
</table>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>This template does not validate input. I don’t know how to do that yet. I must remember to use money values for “Amount” and to tag every transaction as <code>:income</code> or <code>:expense:</code>. Later I can learn how to enforce these rules with code.</p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Triggering a capture</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p><code>C-c c</code> is a global binding which starts <code>org-capture</code> from whatever I’m doing.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/org-capture-menu-1_1721609069475_0.png" alt="org-capture-menu-1.png"></p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/org-capture-menu-2_1721609093452_0.png" alt="org-capture-menu-2.png"></p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I get prompted for Amount, Summary, and tags. Once I answer those prompts, I am shown the Capture buffer. I don’t need to change anything, so I finalize the entry with <code>C-c C-c</code>.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/org-money-capture-buffer_1721609124725_0.png" alt="org-money-capture-buffer.png"></p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p>After I finalize the entry, Emacs closes the Capture buffer and returns me to whatever I was doing before. I can complete the whole process in about five seconds, which makes it even more convenient for me than the old paper notebook.</p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Filtering my agenda</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>Even though Org knows <code>journal.org</code> is an agenda file, inactive timestamps aren’t shown in the default agenda view. I’m okay with this for now. Things can get a little cluttered if I start showing every logged item.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Show me all the <code>:money:</code> entries</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p><code>C-c a</code> opens the menu of Agenda commands. m lets me search for tag matches. Let’s start with all <code>:money:</code> entries.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/agenda-filter-money_1721609196402_0.png" alt="agenda-filter-money.png"></p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Show me income</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>I already have the agenda match view open, so I use <code>C-u r</code> to refresh with a new search string, “income”.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/agenda-filter-income_1721609231353_0.png" alt="agenda-filter-income.png"></p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Show me expenses</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>Again, I use <code>C-u r</code> to refresh, this time looking for entries that match “expense”.</p>

        
      

      
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <p><img src="../assets/agenda-filter-expense_1721609269526_0.png" alt="agenda-filter-expense.png"></p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  

    </section>
  

      
    
  
    
      
        
  
    <section class="block">
      
        

        
          <heading><p>Stop here</p>
</heading>
        
      

      
  
    
      
        
  
    <section class="block">
      
        

        
          <p>Oh I want to get fancy so bad. Honestly though, I need to set the basic habit of logging all the little things I do with my money. Besides, this gives me something to learn and write future blog posts about!</p>

        
      

      
  

    </section>
  

      
    
  

    </section>
  

      
    
  

    </section>
  

  </section>

  </article>

      </main>
      <footer>
      <p>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">My Public Brain</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://randomgeekery.online" property="cc:attributionName" rel="cc:attributionURL">Brian Wisti</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
      </p>

      <p>
        Notes written in <a href="https://logseq.com">Logseq</a> and published with <a href="https://11ty.dev">Eleventy</a>.
      </p>
      </footer>
      
  </body>
</html>
